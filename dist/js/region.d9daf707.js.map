{"version":3,"file":"js/region.d9daf707.js","mappings":"qJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,QAAU,OAAO,CAACH,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,MAAM,CAACR,EAAIS,OAAO,eAAgB,aAAc,eAAe,CAACL,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIU,GAAG,IAAIV,EAAIW,GAAGX,EAAIY,UAAU,OAAOR,EAAG,IAAI,GAAG,CAACJ,EAAIU,GAAG,IAAIV,EAAIW,GAAGX,EAAIa,aAAa,UAAU,GAAGT,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACN,EAAIU,GAAG,aAAaN,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,IAAI,CAACE,YAAY,uBAAuBC,MAAM,CAAC,KAAOP,EAAIc,gBAAgB,CAACV,EAAG,OAAO,CAACE,YAAY,2CAA2C,CAACN,EAAIU,GAAG,4BAA4BN,EAAG,SAAS,CAACE,YAAY,oBAAoBC,MAAM,CAAC,MAAQ,KAAK,CAACP,EAAIU,GAAG,iCAAiC,MAAM,GAAGN,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAOP,EAAIe,KAAK,MAAQf,EAAIgB,SAAS,MAAQhB,EAAIiB,SAAS,KAAOjB,EAAIkB,QAAQ,QAAUlB,EAAImB,WAAW,MAAQnB,EAAIoB,MAAM,OAASpB,EAAIqB,WAAWC,GAAG,CAAC,cAAc,SAASC,GAAQvB,EAAIe,KAAKQ,OAAY,IAAI,IAAI,IAAI,IAAI,IAC1iCC,EAAkB,G,SCDP,MAAMC,EACnBC,YAAYC,EAAS,+BACnB1B,KAAK0B,OAASA,EACd1B,KAAK2B,OAAS,KAGH,cAACC,GACZ,MAAMC,EAAMD,EAAQ5B,KAAK0B,OAASE,EAAQ5B,KAAK0B,OAC/C1B,KAAK2B,aAAe,IAAIG,SAAQ,CAACC,EAAKC,KACpC,MAAMC,EAAS,IAAIC,UAAUL,GAC7BI,EAAOE,iBAAiB,QAAQ,IAAMJ,EAAIE,IAAS,CAAEG,MAAM,IAC3DH,EAAOE,iBAAiB,SAAUE,GAAML,EAAIK,IAAI,CAAED,MAAM,QCsC9D,OACAE,KAAAA,aACAC,WAAAA,CACAC,UAAAA,IAAAA,QAAAA,IAAAA,CAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,KAAAA,EAAAA,EAAAA,OAAAA,KAAAA,EAAAA,KAAAA,EAAAA,QAEAC,OACA,OACA3B,KAAAA,EACA4B,SAAAA,OAGAC,SAAAA,KACA,QACA,gBACA,CACA,uCACA,wEAEAxB,QACA,SACAyB,EAAAA,KAAAA,MAEA,WAGAC,MAAAA,CACA1B,MAAAA,CACA2B,WAAAA,EACAC,MAAAA,EACAC,QAAAA,GACA,qBAIAC,QAAAA,KACA,uCACA,yBACA,mBAEA,kBACA,oBACA,YACA,yBAGAC,UACA,mBC/FgS,ICChS,GAAgB,cAAc,4B,+ECO9B,SAASC,EAAcC,GAErBpD,KAAK,UAAa,UAAiB,EAMrC,IAAIqD,GAAY,OACd,EACAvD,EACAyB,GACA,EACA4B,EACA,KACA,MAIF,EAAeE,EAAiB,QAShC,IAAkBA,EAAW,CAACC,MAAK,cAAU,UAAK,UAAM,SAAK","sources":["webpack://msh22/./src/views/region.vue?7b14","webpack://msh22/./src/sereviecs/socketClient.js","webpack://msh22/src/views/region.vue","webpack://msh22/./src/views/region.vue?007b","webpack://msh22/./src/views/region.vue?31d7","webpack://msh22/./src/views/region.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pa-5\"},[_c('v-card',{attrs:{\"rounded\":\"lg\"}},[_c('v-card-text',[_c('v-row',[_c('v-col',{class:[_vm.$style['card-header'], 'base--text', 'text-start']},[_c('h3',{staticClass:\"text-h4\"},[_vm._v(\" \"+_vm._s(_vm.getTitle)+\" \")]),_c('p',{},[_vm._v(\" \"+_vm._s(_vm.getSubtitle)+\" \")])])],1),_c('v-row',[_c('v-col',[_c('h3',{staticClass:\"my-3\"},[_vm._v(\"Отчет\")])]),_c('v-col',{attrs:{\"cols\":\"auto\"}},[_c('a',{staticClass:\"text-decoration-none\",attrs:{\"href\":_vm.getExportLink}},[_c('span',{staticClass:\" accent--text text-decoration-underline\"},[_vm._v(\"Экспортировать в Excel\")]),_c('v-icon',{staticClass:\"accent--text ml-1\",attrs:{\"small\":\"\"}},[_vm._v(\" mdi-content-save-outline \")])],1)])],1),_c('v-row',[_c('v-col',[_c('DataTable',{attrs:{\"page\":_vm.page,\"limit\":_vm.getLimit,\"pages\":_vm.getPages,\"list\":_vm.getList,\"columns\":_vm.getColumns,\"query\":_vm.query,\"filter\":_vm.getFilter},on:{\"update:page\":function($event){_vm.page=$event}}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class SocketClient {\n  constructor(baseWs = 'wss://msh22.remonstro.ru/ws') {\n    this.baseWs = baseWs;\n    this.client = null;\n  }\n\n  async connect(model) {\n    const url = model ? this.baseWs + model : this.baseWs;\n    this.client = await new Promise((res, rej) => {\n      const socket = new WebSocket(url);\n      socket.addEventListener('open', () => res(socket), { once: true });\n      socket.addEventListener('error', (e) => rej(e), { once: true });\n    });\n  }\n}\n","<template>\n  <div class=\"pa-5\">\n  <v-card rounded=\"lg\">\n    <v-card-text>\n      <v-row>\n        <v-col :class=\"[$style['card-header'], 'base--text', 'text-start']\">\n          <h3 class=\"text-h4\">\n            {{ getTitle }}\n          </h3>\n          <p class=\"\">\n            {{ getSubtitle }}\n          </p>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col>\n          <h3 class=\"my-3\">Отчет</h3>\n        </v-col>\n        <v-col cols=\"auto\">\n          <a :href=\"getExportLink\" class=\"text-decoration-none\">\n            <span class=\" accent--text text-decoration-underline\">Экспортировать в Excel</span>\n            <v-icon small class=\"accent--text ml-1\">\n              mdi-content-save-outline\n            </v-icon>\n          </a>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col>\n          <DataTable\n            :page.sync=\"page\"\n            :limit=\"getLimit\"\n            :pages=\"getPages\"\n            :list=\"getList\"\n            :columns=\"getColumns\"\n            :query=\"query\"\n            :filter=\"getFilter\"\n          ></DataTable>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport SocketClient from '@/sereviecs/socketClient';\n\nexport default {\n  name: 'RegionPage',\n  components: {\n    DataTable: () => import('@/components/DataTable.vue'),\n  },\n  data() {\n    return {\n      page: 1,\n      wsCilent: null,\n    };\n  },\n  computed: {\n    ...mapGetters(\n      'RegionPredict',\n      [\n        'getList', 'getColumns', 'getExportLink',\n        'getSubtitle', 'getTitle', 'getCount', 'getLimit', 'getPages', 'getFilter'],\n    ),\n    query() {\n      const query = {\n        p: this.page,\n      };\n      return query;\n    },\n  },\n  watch: {\n    query: {\n      immediate: true,\n      deep: true,\n      handler(query) {\n        this.fetchData(query);\n      },\n    },\n  },\n  methods: {\n    ...mapActions('RegionPredict', ['fetchList']),\n    async fetchData(query) {\n      await this.fetchList(query);\n    },\n    async connectWs() {\n      const ws = new SocketClient();\n      await ws.connect();\n      this.wsCilent = ws.client;\n    },\n  },\n  created() {\n    this.connectWs();\n  },\n};\n</script>\n\n<style lang=\"scss\" module>\n.card-header {\n  text-align: center;\n  width: 850px;\n  max-width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"","// extracted by mini-css-extract-plugin\nexport default {\"card-header\":\"region_card-header_G7sxX\"};","import { render, staticRenderFns } from \"./region.vue?vue&type=template&id=b703b6b8&\"\nimport script from \"./region.vue?vue&type=script&lang=js&\"\nexport * from \"./region.vue?vue&type=script&lang=js&\"\nimport style0 from \"./region.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardText,VCol,VIcon,VRow})\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","class","$style","_v","_s","getTitle","getSubtitle","getExportLink","page","getLimit","getPages","getList","getColumns","query","getFilter","on","$event","staticRenderFns","SocketClient","constructor","baseWs","client","model","url","Promise","res","rej","socket","WebSocket","addEventListener","once","e","name","components","DataTable","data","wsCilent","computed","p","watch","immediate","deep","handler","methods","created","injectStyles","context","component","VCard"],"sourceRoot":""}